# Gemini Translator 文件索引

## 概述

本文件集詳細記錄了 Gemini Translator 工具的翻譯策略、系統架構和技術實作。這些文件為開發者、維護者和使用者提供深入的技術洞察。

## 文件結構

### 📋 [翻譯策略分析](./translation-strategy.md)
詳細分析 Gemini Translator 的核心翻譯策略，包括：
- **情境感知翻譯**：如何利用內容摘要提升翻譯品質
- **批次處理策略**：最佳化的批次大小和平行處理機制
- **格式專用處理**：針對不同檔案格式的專門處理策略
- **品質保證機制**：多層驗證和錯誤恢復機制
- **專業術語對應**：確保技術文件翻譯一致性的策略

### 🏗️ [系統架構分析](./architecture-analysis.md)
深入探討系統的整體架構設計，涵蓋：
- **整體架構圖**：系統各元件的關係和資料流
- **核心元件分析**：主應用程式、併發管理、格式解析器等
- **設計模式應用**：策略模式、工廠模式、責任鏈模式等
- **效能設計**：記憶體效率、網路效率、CPU 效率
- **擴充性設計**：如何支援新格式、新模型、新語言
- **安全性考量**：輸入驗證、API 安全、輸出安全

### 📝 [格式處理詳解](./format-processing.md)
詳細說明各種檔案格式的處理機制：
- **SRT 格式處理**：解析策略、序號處理、時間碼驗證
- **WebVTT 格式處理**：彈性序號、樣式保護、自動修正
- **ASS 格式處理**：複雜結構解析、樣式保護、格式轉換
- **Markdown 格式處理**：複雜度分析、結構識別、混合內容處理
- **格式轉換支援**：跨格式轉換的策略和相容性

### 🔌 [API 整合與錯誤處理](./api-integration.md)
深入分析與 Gemini API 的整合和錯誤處理機制：
- **API 整合架構**：認證、請求格式、安全考量
- **智慧提示詞系統**：情境注入、術語對應
- **批次處理策略**：最佳化批次大小、平行處理、進度監控
- **錯誤處理機制**：多層重試、格式恢復、錯誤分類
- **效能最佳化**：記憶體管理、網路最佳化、快取機制

## 關鍵技術亮點

### 🎯 情境感知翻譯
Gemini Translator 的獨特之處在於其情境感知能力：
```javascript
// 先生成內容摘要
const summary = await generateContentSummary(allTexts);

// 將摘要作為翻譯上下文
const contextPrompt = `【主題摘要】${summary}`;
```

### ⚡ 高效能批次處理
系統採用最佳化的批次處理策略：
- **批次大小**：10 個項目（平衡效率與資源使用）
- **併發數量**：最多 20 個並行任務
- **負載均衡**：Promise Pool 管理併發請求

### 🛡️ 強大的錯誤恢復
多層錯誤恢復機制確保翻譯成功：
1. **API 級重試**：指數退避重試機制
2. **格式級驗證**：檢查翻譯結果格式完整性
3. **策略級切換**：失敗時自動切換翻譯策略
4. **逐行級處理**：最後防線的逐行翻譯

### 📊 智慧格式處理
針對複雜的 Markdown 格式：
- **結構識別**：自動識別程式碼區塊、連結、表格等
- **混合內容處理**：逐行翻譯保護特殊語法
- **格式驗證**：確保翻譯後格式完整性

## 使用場景

### 👥 開發者
- **程式碼理解**：深入了解系統設計和實作細節
- **功能擴展**：基於現有架構添加新功能
- **問題診斷**：理解錯誤處理機制和除錯策略
- **效能調優**：了解效能瓶頸和最佳化方法

### 🔧 維護者
- **系統維護**：理解各元件的職責和相互關係
- **問題修復**：快速定位和修復問題
- **版本升級**：安全地進行系統升級和遷移
- **監控調整**：基於系統架構設計監控策略

### 📚 使用者
- **功能理解**：深入了解工具的能力和限制
- **最佳實踐**：學習如何最有效地使用工具
- **問題排解**：理解常見問題的原因和解決方法
- **客製化需求**：了解如何調整工具以滿足特定需求

## 技術規格

### 🔧 核心技術
- **Node.js 20+**：使用現代 JavaScript 特性和 ES 模組
- **Axios**：HTTP 客戶端，負責 API 整合
- **Yargs**：命令列參數解析
- **Promise Pool**：自製併發管理工具

### 📈 效能指標
- **批次大小**：10 個項目/批次
- **最大併發**：20 個並行任務
- **重試次數**：最多 10 次重試
- **記憶體使用**：串流處理，避免大量記憶體佔用

### 🎨 設計模式
- **策略模式**：不同格式使用不同處理策略
- **工廠模式**：根據檔案類型建立處理器
- **責任鏈模式**：錯誤處理和重試機制
- **觀察者模式**：進度追蹤和狀態更新

## 貢獻指南

### 🚀 開發環境設定
1. 閱讀 [系統架構分析](./architecture-analysis.md) 了解整體設計
2. 學習 [格式處理詳解](./format-processing.md) 了解格式處理機制
3. 參考 [API 整合與錯誤處理](./api-integration.md) 了解外部整合

### 📝 文件維護
- 新增功能時，請更新相關文件章節
- 修改核心邏輯時，請檢查是否需要更新架構文件
- 提交 PR 時，請包含相應的文件更新

### 🧪 測試策略
- 參考現有測試結構，為新功能添加相應測試
- 確保測試覆蓋核心翻譯邏輯和錯誤處理機制
- 運行 `npm test` 確保所有測試通過

## 版本歷史

### v1.2.0（當前版本）
- 支援 Markdown 格式翻譯
- 增強的格式驗證機制
- 改進的錯誤處理和恢復機制
- 完整的文件系統

### 未來規劃
- 更多 AI 模型支援
- 額外語言對支援
- 效能最佳化改進
- 更豐富的客製化選項

## 聯絡資訊

如有技術問題或建議，請透過以下方式聯絡：
- GitHub Issues：[Repository Issues](https://github.com/doggy8088/gemini-translator/issues)
- 電子郵件：專案維護者信箱

---

**本文件集由 Gemini Translator 開發團隊維護，最後更新：2024 年 12 月**